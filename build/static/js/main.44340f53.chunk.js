(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,a){e.exports=a(73)},60:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),s=a.n(c),o=a(2),u=a.n(o),l=a(6),i=a(1),m=a(10),p=a(3),h=a(5),b=a.n(h),d=Object(n.createContext)(null),E=function(){var e=Object(n.useContext)(d),t=e.userData,a=e.setUserData,c=Object(p.f)();return r.a.createElement("nav",{className:"auth-options"},t.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{className:"my-post-btn",to:"/user?id="+t.user.userName},"My Posts"),r.a.createElement("button",{onClick:function(){a({token:null,user:null}),localStorage.setItem("auth-token",""),c.push("/")}},"Log out")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return c.push("/login")}},"Login"),r.a.createElement("button",{onClick:function(){return c.push("/register")}},"Register")))},f=function(){return r.a.createElement("header",{id:"header"},r.a.createElement(m.b,{to:"/"},r.a.createElement("h2",{className:"page-name"},"Blog Page")),r.a.createElement(E,null))},g=function(e){var t=function(){var t=Object(l.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,t.next=3,b.a.delete("https://craig-blog-site.herokuapp.com/posts/"+a);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"post-outer"},r.a.createElement("div",{className:"post-inner"},r.a.createElement("h3",{className:"post-title"},e.title),r.a.createElement("p",{className:"author"},"written by ",e.author),r.a.createElement("p",{className:"post-content"},e.content.substring(0,250)+" ...",r.a.createElement(m.b,{to:"/posts?id="+e.id},r.a.createElement("button",null,"Read more"))),e.deleteButton?r.a.createElement("div",{className:"delete-btn"},r.a.createElement("button",{onClick:t,className:"error-message"},"Delete")):null))},v=function(){var e=Object(n.useContext)(d).userData,t=Object(p.f)(),a=Object(n.useState)([]),c=Object(i.a)(a,2),s=c[0],o=c[1];Object(n.useEffect)((function(){(function(){var t=Object(l.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("https://craig-blog-site.herokuapp.com/posts");case 2:a=t.sent,o(a.data.posts),console.log(e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);var m=function(){e.token?t.push("/create"):t.push("/login")};return r.a.createElement("div",null,e.user?r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"Welcome ",e.user.userName),r.a.createElement("h2",null,"Anything on your mind today?"),r.a.createElement("button",{onClick:m},"+")):r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"Write what's on your mind."),r.a.createElement("button",{onClick:m},"+")),s.map((function(e){return r.a.createElement(g,{key:e._id,author:e.author,content:e.content,title:e.title,id:e._id,deleteButton:!1})})))};var j=function(e){return r.a.createElement("div",{className:"error-message"},r.a.createElement("span",null,e.msg),r.a.createElement("button",{onClick:e.clearError},r.a.createElement("b",null,"X")))},O=function(){var e=Object(p.f)(),t=Object(n.useContext)(d).setUserData,a=Object(n.useState)(),c=Object(i.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(),h=Object(i.a)(m,2),E=h[0],f=h[1],g=Object(n.useState)(),v=Object(i.a)(g,2),O=v[0],k=v[1],w=Object(n.useState)(),x=Object(i.a)(w,2),y=x[0],N=x[1],S=Object(n.useState)(""),C=Object(i.a)(S,2),D=C[0],I=C[1],B=function(){var a=Object(l.a)(u.a.mark((function a(n){var r,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,r={userName:s,email:E,password:O,passwordCheck:y},a.next=5,b.a.post("https://craig-blog-site.herokuapp.com/users/register",r);case 5:return a.next=7,b.a.post("https://craig-blog-site.herokuapp.com/users/login",{email:E,password:O});case 7:c=a.sent,t({token:c.data.token,user:c.data.user}),localStorage.setItem("auth-token",c.data.token),e.push("/"),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),a.t0.response.data.msg&&I(a.t0.response.data.msg);case 16:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"outer-login"},r.a.createElement("div",{className:"inner-login register"},r.a.createElement("form",{onSubmit:B},r.a.createElement("h1",null,"Register"),r.a.createElement("p",{className:"login-username"},r.a.createElement("input",{type:"text",name:"reg-username",placeholder:"Username",onChange:function(e){return o(e.target.value)}})),r.a.createElement("p",{className:"login-pw"},r.a.createElement("input",{type:"text",name:"reg-email",placeholder:"Email",onChange:function(e){return f(e.target.value)}})),r.a.createElement("p",{className:"login-pw"},r.a.createElement("input",{type:"password",name:"reg-pass",placeholder:"Password",onChange:function(e){return k(e.target.value)}})),r.a.createElement("p",{className:"login-pw"},r.a.createElement("input",{type:"password",name:"reg-pass-check",placeholder:"Confirm password",onChange:function(e){return N(e.target.value)}})),r.a.createElement("p",null," ",r.a.createElement("button",{type:"submit"},"Submit")," "))),D&&r.a.createElement(j,{msg:D,clearError:function(){return I(void 0)}}))},k=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),o=Object(i.a)(s,2),m=o[0],h=o[1],E=Object(n.useState)(""),f=Object(i.a)(E,2),g=f[0],v=f[1],O=Object(p.f)(),k=Object(n.useContext)(d).setUserData,w=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("https://craig-blog-site.herokuapp.com/users/login",{email:a,password:m});case 4:n=e.sent,k({token:n.data.token,user:n.data.user}),localStorage.setItem("auth-token",n.data.token),O.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data.msg&&v(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"outer-login"},r.a.createElement("div",{className:"inner-login"},r.a.createElement("form",{onSubmit:w},r.a.createElement("h1",null,"Log In"),r.a.createElement("p",{className:"login-username"}," ",r.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:function(e){c(e.target.value)}})),r.a.createElement("p",{className:"login-pw"}," ",r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:function(e){h(e.target.value)}})),r.a.createElement("p",null," ",r.a.createElement("button",{type:"submit"},"Log in")," "))),g&&r.a.createElement(j,{msg:g,clearError:function(){return v(void 0)}}))},w=(a(60),function(){var e=Object(p.f)(),t=Object(n.useContext)(d).userData,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(""),h=Object(i.a)(m,2),E=h[0],f=h[1],g=Object(n.useState)(t.user.userName),v=Object(i.a)(g,2),j=v[0],O=(v[1],function(){var t=Object(l.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b.a.post("https://craig-blog-site.herokuapp.com/posts",{title:s,content:E,author:j});case 4:t.sent,e.push("/"),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}());return r.a.createElement("div",{className:"create"},r.a.createElement("form",{onSubmit:O},r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Title",onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("textarea",{placeholder:"Write what's on your mind...",onChange:function(e){return f(e.target.value)}})),r.a.createElement("button",{type:"submit"},"Submit")))}),x=a(14),y=a.n(x),N=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(""),s=Object(i.a)(c,2),o=s[0],m=s[1],p=Object(n.useState)(""),h=Object(i.a)(p,2),d=h[0],E=h[1],f=Object(n.useState)(""),g=Object(i.a)(f,2),v=g[0],j=g[1];return Object(n.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.a.parse(window.location.search),e.next=3,b.a.get("https://craig-blog-site.herokuapp.com/posts/"+t.id);case 3:n=e.sent,a(n.data.post._id),m(n.data.post.author),E(n.data.post.title),j(n.data.post.content);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"post-expand"},r.a.createElement("h1",null,d),r.a.createElement("h4",null,"written by ",o),r.a.createElement("p",null,v)))},S=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.a.parse(window.location.search),e.next=3,b.a.get("https://craig-blog-site.herokuapp.com/posts/user/"+t.id);case 3:a=e.sent,c(a.data.posts);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),r.a.createElement("div",{className:"user-posts"},0===a.length?r.a.createElement("h1",{className:"welcome"},"You have no posts yet!"):null,a.map((function(e){return r.a.createElement(g,{key:e._id,author:e.author,content:e.content,title:e.title,id:e._id,deleteButton:!0})})))};var C=function(){var e=Object(n.useState)({token:void 0,user:void 0}),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(t="",localStorage.setItem("auth-token",t)),e.next=4,b.a.post("https://craig-blog-site.herokuapp.com/users/tokenCheck",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,b.a.get("https://craig-blog-site.herokuapp.com/users/",{headers:{"x-auth-token":t}});case 8:a=e.sent,c({token:t,user:a.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(d.Provider,{value:{userData:a,setUserData:c}},r.a.createElement(f,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:v}),r.a.createElement(p.a,{path:"/login",component:k}),r.a.createElement(p.a,{path:"/register",component:O}),r.a.createElement(p.a,{path:"/create",component:w}),r.a.createElement(p.a,{path:"/posts",component:N}),r.a.createElement(p.a,{path:"/user",component:S})))))};s.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.44340f53.chunk.js.map